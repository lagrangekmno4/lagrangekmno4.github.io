<!DOCTYPE html>
<html lang="zh-CN" color-mode="light">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <meta name="author" content="lagrangekmno4" />
  <meta name="description" content="" />
  
  
  <title>
    
      清华园之旅——2024.1 
      
      
      |
    
     一个小窝
  </title>

  
    <link rel="apple-touch-icon" href="/images/avator.jpg">
    <link rel="icon" href="/images/avator.jpg">
  

  <!-- Raleway-Font -->
  <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">

  <!-- hexo site css -->
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css" />
  <!-- 代码块风格 -->
  

  <!-- jquery3.3.1 -->
  
    <script defer type="text/javascript" src="/plugins/jquery.min.js"></script>
  

  <!-- fancybox -->
  
    <link href="/plugins/jquery.fancybox.min.css" rel="stylesheet">
    <script defer type="text/javascript" src="/plugins/jquery.fancybox.min.js"></script>
  
  
<script src="/js/fancybox.js"></script>


  

  
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  <script>
    var html = document.documentElement
    const colorMode = localStorage.getItem('color-mode')
    if (colorMode) {
      document.documentElement.setAttribute('color-mode', colorMode)
    }
  </script>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="一个小窝" type="application/atom+xml">
</head>


  <body>
    <div id="app">
      <div class="header">
  <div class="avatar">
    <a href="/">
      <!-- 头像取消懒加载，添加no-lazy -->
      
        <img src="/images/avator.jpg" alt="">
      
    </a>
    <div class="nickname"><a href="/">Lagrangekmno4</a></div>
  </div>
  <div class="navbar">
    <ul>
      
        <li class="nav-item" data-path="/">
          <a href="/">Home</a>
        </li>
      
        <li class="nav-item" data-path="/archives/">
          <a href="/archives/">Archives</a>
        </li>
      
        <li class="nav-item" data-path="/about/">
          <a href="/about/">About</a>
        </li>
      
        <li class="nav-item" data-path="/projects/">
          <a href="/projects/">Projects</a>
        </li>
      
        <li class="nav-item" data-path="https://mathloveyou.github.io">
          <a target="_blank" rel="noopener" href="https://mathloveyou.github.io">数学指南</a>
        </li>
      
    </ul>
  </div>
</div>


<script src="/js/activeNav.js"></script>



      <div class="flex-container">
        <!-- 文章详情页，展示文章具体内容，url形式：https://yoursite/文章标题/ -->
<!-- 同时为「标签tag」，「朋友friend」，「分类categories」，「关于about」页面的承载页面，具体展示取决于page.type -->


  <!-- LaTex Display -->

  
    <script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      }
    }
  </script>





  <!-- clipboard -->

  
    <script async type="text/javascript" src="/plugins/clipboard.min.js"></script>
  
  
<script src="/js/codeCopy.js"></script>







  

  

  

  
  <!-- 文章内容页 url形式：https://yoursite/文章标题/ -->
  <div class="container post-details" id="post-details">
    <div class="post-content">
      <div class="post-title">清华园之旅——2024.1</div>
      <div class="post-attach">
        <span class="post-pubtime">
          <i class="iconfont icon-updatetime mr-10" title="更新时间"></i>
          2024-01-12 21:29:41
        </span>
        
      </div>
      <div class="markdown-body">
        <h2 id="1-1"><a href="#1-1" class="headerlink" title="1.1"></a>1.1</h2><p>新年快乐！</p>
<h2 id="1-2"><a href="#1-2" class="headerlink" title="1.2"></a>1.2</h2><p>虽然明天就要考概1了但我今天还是要骂（，说的就是工工的非线性规划，评价为以后专业课我还是只上数学系求真和统计中心的研究生课了。下面我来细说一下：</p>
<p>一罪：短短100分钟的时间出整整6道大题，而且每道题都有两三个小问。</p>
<p>二罪：整套卷子没有一道是严格的数学推理，甚至我写的数学公式不超过10个，大部分都是和写作文一样的论述题，甚至有“描述牛顿迭代法在这个函数下的收敛行为”、“这个优化问题是否满足最优条件的充要条件”以及判断以下概念是否正确，如正确证明不正确给出反例这种逆天题目，评价为我是真的不知道怎么写，差不多得了（</p>
<p>三罪：即使是为数不多阳间的正儿八经给个函数手搓优化的题目，无论是函数还是算出来的条件都丑不拉几，甚至有一个手搓duality的primal函数可行域只有一个点，最后搓出来的duality丑的跟史一样；更不用说您那最小距离函数最后算出来看起来也没法化简最后摆了一个和史一样的最优条件放上边了。</p>
<p>总的来说考试体验极差，大概也不会拿一个多好的分数了，搁在以前我会怀疑是自己选课策略有问题，但现在我会说差不多得了不会出期末考试题可以不出（。茶园那个优化如果能保持期中的出题风格大概是不会出大岔子的，大概率是3分（我超虽说是封顶1.5一次scribe但总没有扣的理由吧，这能怎么扣啊）的bonus也给了很大的容错但总的来说这门课上得总体感觉也是水水的，如果好好把boyd的bubeck书过一遍效果和上这门课的效果是等同甚至更好一些。或者更广义的来说，或许非数学科班的数学课就是这样子，我应该上的或许应该是数学科班的数学课和数学科班的非数学课也就是编程或者算法之类的课，但众所周知你清编程课有点（。所以或许真的要上的专业课还是那些比较严肃的基础数学课，比如实分析、泛函、微分流形（如果要接触一些流形优化）、概随之类的课，而这些课每学期也就一两门顶天了，精耕细作大概也是这样的精耕细作，不是跟这学期一样搁着大水漫灌了一堆数学课最后也不知道学了个什么玩意最后要是把gpa整崩坏了就更谔谔了（</p>
<p>下学期大概就是实复分析组合优化再加一个高维了，金融统计大概会去旁听，或者旁听高维去选个金融统计，这个到时再说，倒也不担心自己又会手贱去选别的课，因为别的课确实没有能选的了。</p>
<h2 id="1-3"><a href="#1-3" class="headerlink" title="1.3"></a>1.3</h2><p>是被whjj的概率论期末蹂躏的一上午（。题目复盘一下：</p>
<ol>
<li>(20pts)写出并证明lindeberg-feller定理，看见之后眼前一黑（。靠着自己的记忆糊了一遍，回来后发现还是有点窟窿。</li>
<li>(10pts)三维Gaussian分布，给协方差矩阵，求 $\mathbb{E}[X_1|X_2+X_3]$ 。类似于最小二乘法，没啥好说的。</li>
<li>(20pts)两个iid Gamma分布的和与比值的分布函数，并判断独立性，没啥好说的，希望没算错（</li>
</ol>
<hr>
<p>前三题都是确实能拿到大部分分数的，后两道题我希望能拿到20分（（。</p>
<ol start="4">
<li>(30pts)<img src="/2024/01/02/diary-2024-1/problem-4.png" alt="problem-4"></li>
</ol>
<p>Durrett原题，但是因为以为不在考试范围没有背（。而且和原题不一样的是， 本来 $\mathbb{P}[X_i&gt;b_n]&#x3D;1&#x2F;n$ 是个很明显的脚手架，但是被 wh 换成了 $b_n&#x3D;\sqrt{2\log n}-\sqrt{\log n\log\log 2n}$ ，哥们直接崩溃（），而且 $\mathbb{P}(X_i&gt;x+\theta&#x2F;x)&#x2F;\mathbb{P}(X_i&gt;x)\to e^{-\theta}$ 这个很明显的脚手架也被扔走了，结果就是硬生生让我用一个丑不垃圾的 $b_n$ 去证 (ii) 然后再去证 (iii)，然而事实上 (ii) 的分布并不是平凡的，所以说就非常难蚌。考试当中第一小问即本题第二小问，哥们把分布函数的定义写上去之后做了步变换就到此为止了，蒙了个正态分布结果是双指数分布，难蚌（，这一问估计最多也就四分了；第二问也即本题第三问按着第一问错误的答案继续做了下去。第三问是一个计数问题，用 SLLN 反倒成了整个大题里面最简单的一个。</p>
<ol start="5">
<li>(20pts)书上的随机游走，具体题目忘了因为背景完全不懂，只能看 wh 给的那些定义式来做。第一问判断一个 r.v. series 是 martingale 并证明 a.s. 收敛，按定义证明不难，就是看 n+1 层的点都可以通过 n 层的点 + 最后一层的点，然后最后一层的点都用期望来表示最后发现可以抵消就完了。 a.s. 收敛算一下 $\mathbb{E}[W_1(\beta)]$ 就完了。第二问是给了一个怪不拉几的条件证明 $L^1$ 收敛，目前能用的技术只有证 U.I. 但也不会证，瞎j8写了一堆走人（</li>
</ol>
<p>总的来说肯定没有期中分数高了，甚至能不能上 70 都很难说。总的来说并不觉得有什么值得自裁的地方，前三题确实都能勉勉强强写上来，第四题这个 trick 至少对我而言如果我没见过我确实想不到，求真✌要是背过这道题或者不背也想得到那我也没办法。第五题第一问也做上来了，第二问那个 $\beta\phi(\beta)’&lt;\phi(\beta)-1$ 我确实不知道要怎么用这个来证 UI 还是说不需要用这个来证总之不清楚，求真✌要是会做或者学过关于二叉树的这个结论那我也确实莫得办法。</p>
<p>总之开摆！现在分数的主动权已经在wh手里了，希望能高抬贵手（确信</p>
<h2 id="1-4"><a href="#1-4" class="headerlink" title="1.4"></a>1.4</h2><p>这b优化（，不知道怎么复习。看 Boyd 的时候突然发现期中考试题大部分选自 Boyd 课后题，遂看了一眼Ch. 9.10.11 的课后题，但感觉似乎没什么能当成考试题的，随便过了一遍。算法不知道要怎么考，如果类似于 HW7 这种step by step的证法那问题不大，如果把脚手架拆了那我可能只会手搓一堆不等式然后随缘推了（</p>
<p>Newton method也不知道怎么考，这后半学期讲的东西就不知道要怎么考，前半学期都是很普适的内容，无论是 LP 还是 Lagrangian duality 还是一般的凸优化问题，随便扔过来一个具体的优化问题就能当考试题做。这后半学期都是具体的算法，无论是直接考人脑优化还是考证bound都没什么道理，所以也很难说zjz会怎么出，只能说随缘了。</p>
<h2 id="1-5"><a href="#1-5" class="headerlink" title="1.5"></a>1.5</h2><p>无论如何先祝贺期末主战场正式结束（，后边两场时间足够慢慢复习了，从零开始也够了（。不过这周考的这三门还是过于惨淡了，先来说一下今天的优化吧。</p>
<p>总的来说相比于期中而言期末考得更像是茶园的考试题而不是数学系的考试题（什么废话），但实际上是并不友好的，总体画风和周源的 dl theory 差不多，有很多算法设计题。第一题是 Barrier method 的实现，前两问都是走程序，第三问看了半天没看明白到底是想让我干啥，按照 $\mathcal O(m^2BR)$ 这个复杂度按图索骥造了个解释的通的算法过程糊过去了。第二题是经典的 0-th oracle optimization，用第一题和梯度的范数逼近之后第二问和第三问都是正常的梯度下降默写，再用 $u$ 的任意性把多出来的杂项 bound 住就可以了。第三题看到后痛苦面具，第一问把整个博弈过程糊上去了又写了一下 strong duality 成立，后来查了一下文献似乎要用特征值什么的，也不知道到底怎么算对，但无论如何当时我也想不到特征值所以怎么都不亏（。第二问类似于 stochastic gradient descent <del>至少收敛速度都是 $\mathcal{O}(\varepsilon^{-2})$</del> ，拿着抄在 cheatsheet 上的算法魔改了一下誊抄在了上面。第三问同样不算很难，player12分别利用该算法不断两边优化即可。</p>
<p>严格来讲最后所有的题都写上去了算是好事，但问题是我这套卷子做的太云了（（。有些题目完全没有理解只是写上了看似正确的推导，有些题目理解了但并没有完全理解，只能按照自己理解的样子去做，即使是感觉对了的题目其实有很多过程也是糊过去的，感觉要寄，反正至少 1.3 那个题我感觉要寄，3.1 不知道那样云云的写会不会得分，3.2 如果理解错了就更寄了，急急急急急急急（</p>
<p>总之这周的考试总的来说大写一个寄字，而且都不是因为复习不充分导致的，要么是因为平时确实没额外刷题比如概率论，要么是老师出题申必比如非线性规划，要么是数学成熟度不够比如优化，总之很难蚌。如果这学期绩点崩坏了那就确实没有为了 GPA 耕耘的必要了，毕竟我就算直接一直这样申请前 3.8 还是没啥问题的，而无论如何我也上不了 3.9 了。</p>
<h2 id="1-6-1-8"><a href="#1-6-1-8" class="headerlink" title="1.6-1.8"></a>1.6-1.8</h2><p>其实到今天才算正式完成 dl theory 的所有作业，第三次作业相对于前两次而言出奇的简单，大部分都是拿现成的轮子套用到具体的神经网络和优化问题上就可以了，<del>虽然原因是因为周源偷懒搬来了 MIT 的作业所以说 MIT 的作业更简单对吗</del>。这样的话虽然 hw2 崩坏了但这门课至少应该可以平稳着陆，pre的打分也完全没有为难我的必要。而量子复杂性理论虽然讲得极其苦难但三次作业和最后一次 take-home exam也都是简单的计算复杂度的经典理论，所以这两门没有期末考试的课大概率都能平安结尾。原则上来讲量子复杂性理论完全是在水分，因为我不会碰tcs更不会碰量子，问就是没必要自己给自己找难受，但至少这门课考核实在是太水了。而 dl theory 确实是这学期收获最大的课，至少为以后的探索道路打下了很好的基础，某种意义上算是摸到了应数科研的边，至少我开始看正经 paper 了不是吗（。所以这学期评价最高的两门课其实都是不考试的，所以以后选不考试的课（确信）</p>
<p>数分和数理统计大概率也就这样，但是期中考得太烂了所以也很难评。概率论期中虽然蹭到了A的边但是期末估计要爆炸；更不用说优化和非线性规划这两个逆天期末了，感觉要出事。开学前立下的不切实际的全A-梦想确实已经是梦想，会不会往下掉都很难说。严格来讲这学期既烂又好，考试考的不好确实是自己的锅，毕竟确实除了dl theory哪门课都没精耕细作，概1也只是以学习理论为主，题目确实做的也不多，而至少就我这种天赋而言考个更好看的成绩也只能靠足够的题目拟合，不然数学成熟度是显然不够应对当前的课程难度的，如果让我去考数分1什么的那可能不怎么刷题也能比大一的时候刷题学得好得多（（，毕竟现在看来当时匪夷所思的trick要么是高阶内容下的常规操作，要么在经历足够多的科班训练后能够看到一些tricky的变换下自然的逻辑。但如果说学知识的话这学期又确实学了很多，概率统计优化甚至是AI theory多少都沾了点，看一些没那么solid的paper也能一步步地follow下去了，虽然high-level的思考还是几乎为零。</p>
<p>不考虑绩点的话确实不用太在乎，如果将来科研做的顺利更无所谓了，毕竟自己反正就是8开头或者7开头了，这个差距在申请当中不能说完全为零只能说几乎没有，不过我还是真的不希望自己的概1拿个低分，本来还想着概1实分析和泛函这三门卷一卷的，看样子第一战就要折戟了。答疑坊的同学还经常找自己聊绩点焦虑的事，自己口口声声给他们动之以情晓之以理，但哪怕是“大三”的自己都还是没能完全看开，究竟还是脱不开窠臼啊。</p>
<hr>
<p>下学期正经考试只有实分析和复分析，通识课似乎有一门有考试的但既然都说人均4.0那我就权且放心，好事。至少我感觉没考试的数学课我学得更好（），大概是因为没有考试所以作业会多一些，这样完成作业的过程也就学的八九不离十了，有考试我还要专门抽出时间来拟合题目。</p>
<h2 id="1-9-1-11"><a href="#1-9-1-11" class="headerlink" title="1.9-1.11"></a>1.9-1.11</h2><p>昨天考完数分后今天光叔发了答案和下学期实分析的讲义，看起来数分应该是可以平稳着陆了。两门不考试的课也都完成了所有的考核任务，不出意外也是可以平安落地的。唯一的变数就是这学期最大的败笔也就是数理统计了，搁这讲一堆难度为 $\mathcal{O}(1)$ 但是背诵量为 $\mathcal{O}(e^n)$ 的东西，然后现在哥们在这背课文，不知道学了个什么，评价为不如叶俊工科概统（）。下学期的高维希望能够学到些东西，感觉杨朋昆看着像讲课不错的不知道为什么反正我看着像就是了，高统有驰老师给的slides大概看一下结合一下邵军那本教材就够了，说白了当时就不该也没有必要上数学专业开的统计的课了，对应的限选课组大概也会选微分几何、pde和拓扑的基础课组。但这学期似乎即使是能4.0的课大概率也是批发$A-$ 了，dl theory不知道周源pre给分怎么样，单看三次作业应该扣个三四分，要是pre好的话能拿个A这样如果找他做科研的话好说话一些（？），概率论肯定趴了只能说A-万岁，数分3可能能A但就是个基础课，其实拿了A也就那样。</p>
<p>下学期科研入门大概率就是找周源或者杨朋昆了，NTK实在是感觉有点自娱自乐的感觉所以不太会打算找林乾，其他的老师又都完全不了解更不太可能去找北大的老师，ljc之前曾和我说过可以考虑一下茶园的老师，但感觉还是算了吧优化理论之殇历历在目。然后在校内做一学期看看能不能上道，在此基础上靠老师推荐或者自己海投找个海外的老师做一些有效的产出，大概是想象范围内最好的结果了，但事实上大部分人第一段科研都不太成功，从校内过渡到校外这个过程又未必顺利，所以说可预见的挫折大概率会多很多。但现在焦虑这些也没什么意义，寒假打算看看paper练练代码，然后下学期开学之前找周源聊一聊，之所以暂时不找ypk，是因为这次找他和上次找似乎没有什么长进，所以在上他课之前就先不找他了以免尴尬。</p>
<p>真的要做的话theory的科研指导成本应该是最低的，至少只要dl theory能拿4.0周源应该没有理由不要我（？），大概率会给我些文献看看我猜，然后去旁听些组会什么的；ypk那边先选上课再说罢，social一波问问他的phd是个怎么个事。</p>
<p>今天看完了假设检验背了114514个pivot statistic，看了驰老师的blog学到很多但是yf没讲这个所以也只能靠背，很难蚌。明天看区间估计和渐近统计，后天再看看decision rule应该就够了，爱怎么考怎么考评价为。</p>
<h2 id="1-12"><a href="#1-12" class="headerlink" title="1.12"></a>1.12</h2><p>割肉买了17号国家大剧院  Zimerman 的钢琴演奏会的票，之前每次看类似古典音乐的演出的时候都会看到很多家长带着真 · 小朋友（<del>社工称呼警告</del>）来看的。其实论花销除非买黄金位置也不过一两百，但别说在县城老家，哪怕是在泰安都不可能看到这种规格的演奏会。尽管确实不太喜欢北京的气候和饮食习惯，但无论如何，就生活的丰富程度上来讲，确实比泰安好太多了。</p>
<p>每次跟家里聊将来要在哪里定居的时候，父母总是希望让我留在北京。其实在我看来也希望在一线城市留下，但原因并不是司空见惯的诸如工作机会、生活丰富程度、子女教育等等的因素。我只是觉得，小城市和县城的关系网和潜规则让我嗤之以鼻，而到了大城市，尽管这些事情仍然存在，但在北京能有什么关系网的人跟我的人生大概率也不会有什么交集，所以可能相对而言反倒是能施展的开拳脚。</p>
<p>复习数理统计，越发感觉这门课相当逆天，且不说老师除了一本主教材一本参考教材之外，没有讲义没有slides，上课完全是在念课文；讲的内容甚至还不如数学系的统推内容丰富，ANOVA和回归分析都没有讲，相比于工工的统推应该只多了一个渐近分析甚至还只是提了一嘴，早知道为何不选个工工的统推呢，至少考试压力没那么大，无论从哪个角度上来讲都很难评。</p>
<p>15号考完但是买的21号回家的票，主要是考虑到现在回了家也没什么事情可以做，学校里的设备也比家里好太多。寒假似乎又有很多事情想做，无论是看paper还是练代码还是练英语，但又不知道自己会不会又三分钟热度。 </p>

      </div>
      
        <div class="prev-or-next">
          <div class="post-foot-next">
            
              <a href="/2023/12/10/20%E5%B2%81%E7%9A%84%E4%B8%80%E4%BA%9B%E6%84%BF%E6%9C%9B/" target="_self">
                <i class="iconfont icon-chevronleft"></i>
                <span>上一页</span>
              </a>
            
          </div>
          <div class="post-attach">
            <span class="post-pubtime">
              <i class="iconfont icon-updatetime mr-10" title="更新时间"></i>
              2024-01-12 21:29:41
            </span>
            
          </div>
          <div class="post-foot-prev">
            
          </div>
        </div>
      
    </div>
    
  <div id="btn-catalog" class="btn-catalog">
    <i class="iconfont icon-catalog"></i>
  </div>
  <div class="post-catalog hidden" id="catalog">
    <div class="title">目录</div>
    <div class="catalog-content">
      
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1"><span class="toc-text">1.1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2"><span class="toc-text">1.2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3"><span class="toc-text">1.3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4"><span class="toc-text">1.4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5"><span class="toc-text">1.5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-1-8"><span class="toc-text">1.6-1.8</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-1-11"><span class="toc-text">1.9-1.11</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-12"><span class="toc-text">1.12</span></a></li></ol>
      
    </div>
  </div>

  
<script src="/js/catalog.js"></script>




    
      <div class="comments-container">
        




  
    <script async type="text/javascript" src="/plugins/valine.min.js" onload="loadValineSuc(this)"></script>
  

  <div id="vcomments"></div>

  <script>
    function loadValineSuc() {
      new Valine({
        el: '#vcomments',
        appId: 'KT54T08PQj0P3C1qnUfcBJCR-gzGzoHsz',
        appKey: 'vzHGva5HtwNi5pMFrfLCvcNv',
        placeholder: 'Welcome!',
        avatar: 'retro',
        lang: 'zh-CN'
      })
    }
  </script>

    <style>
      .comments-container .v .vempty {
        display: none!important;
      }
    </style>




      </div>
    
  </div>


        
<div class="footer">
  <div class="social">
    <ul>
      
        <li>
          <a title="github" target="_blank" rel="noopener" href="https://github.com/lagrangekmno4">
            <i class="iconfont icon-github"></i>
          </a>
        </li>
      
        <li>
          <a title="email" href="liuzhang21@mails.tsinghua.edu.cn">
            <i class="iconfont icon-envelope"></i>
          </a>
        </li>
      
    </ul>
  </div>
  
    
    <div class="footer-more">
      
        <a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Copyright © 2024 Oranges</a>
        
    </div>
  
    
    <div class="footer-more">
      
        <a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Theme by Oranges | Powered by Hexo</a>
        
    </div>
  
  
    <div class="footer-views">
      
          本站总访问量<span id="busuanzi_value_site_pv"></span>次
        
      
          本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        
      
          本站访客数<span id="busuanzi_value_site_uv"></span>人
        
      
    </div>
  
</div>

      </div>

      <div class="tools-bar">
        <div class="back-to-top tools-bar-item hidden">
  <a href="javascript: void(0)">
    <i class="iconfont icon-chevronup"></i>
  </a>
</div>


<script src="/js/backtotop.js"></script>



        
  <div class="search-icon tools-bar-item" id="search-icon">
    <a href="javascript: void(0)">
      <i class="iconfont icon-search"></i>
    </a>
  </div>

  <div class="search-overlay hidden">
    <div class="search-content" tabindex="0">
      <div class="search-title">
        <span class="search-icon-input">
          <a href="javascript: void(0)">
            <i class="iconfont icon-search"></i>
          </a>
        </span>
        
          <input type="text" class="search-input" id="search-input" placeholder="搜索...">
        
        <span class="search-close-icon" id="search-close-icon">
          <a href="javascript: void(0)">
            <i class="iconfont icon-close"></i>
          </a>
        </span>
      </div>
      <div class="search-result" id="search-result"></div>
    </div>
  </div>

  <script type="text/javascript">
    var inputArea = document.querySelector("#search-input")
    var searchOverlayArea = document.querySelector(".search-overlay")

    inputArea.onclick = function() {
      getSearchFile()
      this.onclick = null
    }

    inputArea.onkeydown = function() {
      if(event.keyCode == 13)
        return false
    }

    function openOrHideSearchContent() {
      let isHidden = searchOverlayArea.classList.contains('hidden')
      if (isHidden) {
        searchOverlayArea.classList.remove('hidden')
        document.body.classList.add('hidden')
        // inputArea.focus()
      } else {
        searchOverlayArea.classList.add('hidden')
        document.body.classList.remove('hidden')
      }
    }

    function blurSearchContent(e) {
      if (e.target === searchOverlayArea) {
        openOrHideSearchContent()
      }
    }

    document.querySelector("#search-icon").addEventListener("click", openOrHideSearchContent, false)
    document.querySelector("#search-close-icon").addEventListener("click", openOrHideSearchContent, false)
    searchOverlayArea.addEventListener("click", blurSearchContent, false)

    var searchFunc = function (path, search_id, content_id) {
      'use strict';
      var $input = document.getElementById(search_id);
      var $resultContent = document.getElementById(content_id);
      $resultContent.innerHTML = "<ul><span class='local-search-empty'>首次搜索，正在载入索引文件，请稍后……<span></ul>";
      $.ajax({
        // 0x01. load xml file
        url: path,
        dataType: "xml",
        success: function (xmlResponse) {
          // 0x02. parse xml file
          var datas = $("entry", xmlResponse).map(function () {
            return {
              title: $("title", this).text(),
              content: $("content", this).text(),
              url: $("url", this).text()
            };
          }).get();
          $resultContent.innerHTML = "";

          $input.addEventListener('input', function () {
            // 0x03. parse query to keywords list
            var str = '<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length <= 0) {
              return;
            }
            // 0x04. perform local searching
            datas.forEach(function (data) {
              var isMatch = true;
              var content_index = [];
              if (!data.title || data.title.trim() === '') {
                data.title = "Untitled";
              }
              var orig_data_title = data.title.trim();
              var data_title = orig_data_title.toLowerCase();
              var orig_data_content = data.content.trim().replace(/<[^>]+>/g, "");
              var data_content = orig_data_content.toLowerCase();
              var data_url = data.url;
              var index_title = -1;
              var index_content = -1;
              var first_occur = -1;
              // only match artiles with not empty contents
              if (data_content !== '') {
                keywords.forEach(function (keyword, i) {
                  index_title = data_title.indexOf(keyword);
                  index_content = data_content.indexOf(keyword);

                  if (index_title < 0 && index_content < 0) {
                    isMatch = false;
                  } else {
                    if (index_content < 0) {
                      index_content = 0;
                    }
                    if (i == 0) {
                      first_occur = index_content;
                    }
                    // content_index.push({index_content:index_content, keyword_len:keyword_len});
                  }
                });
              } else {
                isMatch = false;
              }
              // 0x05. show search results
              if (isMatch) {
                str += "<li><a href='" + data_url + "' class='search-result-title'>" + orig_data_title + "</a>";
                var content = orig_data_content;
                if (first_occur >= 0) {
                  // cut out 100 characters
                  var start = first_occur - 20;
                  var end = first_occur + 80;

                  if (start < 0) {
                    start = 0;
                  }

                  if (start == 0) {
                    end = 100;
                  }

                  if (end > content.length) {
                    end = content.length;
                  }

                  var match_content = content.substr(start, end);

                  // highlight all keywords
                  keywords.forEach(function (keyword) {
                    var regS = new RegExp(keyword, "gi");
                    match_content = match_content.replace(regS, "<span class=\"search-keyword\">" + keyword + "</span>");
                  });

                  str += "<p class=\"search-result-abstract\">" + match_content + "...</p>"
                }
                str += "</li>";
              }
            });
            str += "</ul>";
            if (str.indexOf('<li>') === -1) {
              return $resultContent.innerHTML = "<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>";
            }
            $resultContent.innerHTML = str;
          });
        },
        error: function(xhr, status, error) {
          $resultContent.innerHTML = ""
          if (xhr.status === 404) {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>未找到search.xml文件，具体请参考：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>";
          } else {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>请求失败，尝试重新刷新页面或稍后重试。<span></ul>";
          }
        }
      });
      $(document).on('click', '#search-close-icon', function() {
        $('#search-input').val('');
        $('#search-result').html('');
      });
    }

    var getSearchFile = function() {
        var path = "/search.xml";
        searchFunc(path, 'search-input', 'search-result');
    }
  </script>




        
  <div class="tools-bar-item theme-icon" id="switch-color-scheme">
    <a href="javascript: void(0)">
      <i id="theme-icon" class="iconfont icon-moon"></i>
    </a>
  </div>

  
<script src="/js/colorscheme.js"></script>





        
  
    <div class="share-icon tools-bar-item">
      <a href="javascript: void(0)" id="share-icon">
        <i class="iconfont iconshare"></i>
      </a>
      <div class="share-content hidden">
        
          <a class="share-item" href="https://twitter.com/intent/tweet?text=' + %E6%B8%85%E5%8D%8E%E5%9B%AD%E4%B9%8B%E6%97%85%E2%80%94%E2%80%942024.1 + '&url=' + http%3A%2F%2Flarangekmno4.github.io%2F2024%2F01%2F02%2Fdiary-2024-1%2F + '" target="_blank" title="Twitter">
            <i class="iconfont icon-twitter"></i>
          </a>
        
        
          <a class="share-item" href="https://www.facebook.com/sharer.php?u=http://larangekmno4.github.io/2024/01/02/diary-2024-1/" target="_blank" title="Facebook">
            <i class="iconfont icon-facebooksquare"></i>
          </a>
        
      </div>
    </div>
  
  
<script src="/js/shares.js"></script>



      </div>
    </div>
  </body>
</html>
